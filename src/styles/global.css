@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* 색상 스키마 설정 */
  :root {
    color-scheme: light;
  }

  :root.dark {
    color-scheme: dark;
  }

  /* 기본적으로 transition 비활성화 */
  * {
    transition: none;
  }

  /* 특정 요소만 transition 활성화 */
  .nav-link,
  button:not([data-no-transition]),
  a:not([data-no-transition]) {
    transition:
      color 0.15s ease,
      background-color 0.15s ease;
  }

  /* 테마 전환 시에만 전체 transition 활성화 */
  .theme-transition * {
    transition:
      background-color 0.3s ease,
      border-color 0.3s ease,
      color 0.3s ease !important;
  }

  /* View Transitions 중에는 color transition 비활성화 */
  ::view-transition-old(*),
  ::view-transition-new(*) {
    transition: none !important;
  }

  /* View Transitions를 위한 contain 설정 */
  [transition\:name] {
    contain: layout style;
  }

  /* 폰트 스무딩 */
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* 포커스 스타일 */
  :focus-visible {
    @apply outline-none ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-gray-950;
  }
}

@layer components {
  /* 코드 블록 스타일 */
  pre {
    @apply rounded-lg border border-gray-200 dark:border-gray-800;
  }

  /* 인라인 코드 스타일 */
  :not(pre) > code {
    @apply rounded bg-gray-100 px-1 py-0.5 text-sm dark:bg-gray-800;
  }
}

/* View Transitions 디버깅 (개발 중에만 사용) */
@layer utilities {
  .debug-view-transitions ::view-transition-group(*) {
    border: 2px solid red;
  }

  .debug-view-transitions ::view-transition-old(*) {
    border: 2px solid blue;
  }

  .debug-view-transitions ::view-transition-new(*) {
    border: 2px solid green;
  }
}
