---
// 테마 초기화 스크립트 - FOUC 방지
---

<script is:inline>
  // 즉시 실행 함수로 초기 테마 적용
  (function () {
    const getStoredTheme = () => {
      const stored = localStorage.getItem('theme');
      return stored === 'light' || stored === 'dark' ? stored : null;
    };

    const getSystemTheme = () => {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };

    const applyTheme = (theme) => {
      const root = document.documentElement;
      if (theme === 'dark') {
        root.classList.add('dark');
      } else {
        root.classList.remove('dark');
      }
    };

    // 초기 테마 적용
    const theme = getStoredTheme() || getSystemTheme();
    applyTheme(theme);

    // 전역 객체에 현재 테마 저장
    window.__currentTheme = theme;
  })();
</script>
